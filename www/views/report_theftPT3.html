<script>
var store = Rhaboo.persistent('policy');

function saveTheftClaim(){


	var uname = store.Name;
	var uphone = store.phone;
	var upostcode = store.postcode;
	var uemail = store.email;
	var uunitType = store.unitType;
	var uinsurer = store.insurer;
	var upolicyNumber = store.policyNumber;
	var urenewalDate = store.renewalDate;
	var umake = store.make;
	var umodel = store.model;
	var uvin = store.vin;
	var photo1SRC = store.photo1SRC;
	var photo2SRC = store.photo2SRC;
	var photo3SRC = store.photo3SRC;
	var photo4SRC = store.photo4SRC;
	var photo5SRC = store.photo5SRC;
	var photo6SRC = store.photo6SRC;

	//Claim fields
	var theftincidentDate = store.theftincidentDate;
	var theftclaimlocation = store.theftclaimlocation;
	var theftincidentDetails = store.theftincidentDetails;
	var theftclaimphoto1SRC = store.theftclaimphoto1SRC;
	var theftclaimphoto2SRC = store.theftclaimphoto2SRC;

	$.ajax({
		type:"POST",
		//url: "http://www.popbumper.co.uk/theft.php",
		url: "http://clubcare.hyperlogic.uk/theft.php",
		contentType: "application/x-www-form-urlencoded",
		cache: false,
		data : ({
		uname:uname,
		uphone:uphone,
		upostcode:upostcode,
		uemail:uemail,
		uunitType:uunitType,
		uinsurer:uinsurer,
		upolicyNumber:upolicyNumber,
		urenewalDate:urenewalDate,
		umake:umake,
		umodel:umodel,
		uvin:uvin,
		photo1SRC:photo1SRC,
		photo2SRC:photo2SRC,
		photo3SRC:photo3SRC,
		photo4SRC:photo4SRC,
		photo5SRC:photo5SRC,
		photo6SRC:photo6SRC,

	//theft fields
		theftincidentDate:theftincidentDate,
		theftclaimlocation:theftclaimlocation,
		theftincidentDetails:theftincidentDetails,
		theftclaimphoto1SRC:theftclaimphoto1SRC,
		theftclaimphoto2SRC:theftclaimphoto2SRC

	}),
	success: function(){
		//alert(data);
		window.location = '#/sendPolicy';
	},
	error :function(){
		//alert("nope :( ");
	},
	complete : function(){
		//alert("Thank you for your registration you will receive the email with further information soon");
		//window.location=’index.html#waiting';
	}
	});
}

if(store.theftclaimphoto1SRC != undefined){
    document.getElementById("image1").src = "data:image/jpeg;base64," + store.theftclaimphoto1SRC;
}

if(store.theftclaimphoto2SRC != undefined){
	document.getElementById("image2").src = "data:image/jpeg;base64," + store.theftclaimphoto2SRC;
}



var pictureSource; // picture source
var destinationType; // sets the format of returned value
var capturedPhoto = 0;

document.addEventListener("deviceready", onDeviceReady, false);


function onDeviceReady() {
	pictureSource = navigator.camera.PictureSourceType;
	destinationType = navigator.camera.DestinationType;

}

function onPhotoDataSuccess1(imageData) {
	store.write('theftclaimphoto1SRC', imageData);
	document.getElementById("image1").src = "data:image/jpeg;base64," + imageData;
}


function onPhotoDataSuccess2(imageData) {
	store.write('theftclaimphoto2SRC', imageData);
	document.getElementById("image2").src = "data:image/jpeg;base64," + imageData;
}


// Called when a photo is successfully retrieved
//
function onPhotoURISuccess(imageURI) {
	console.log(imageURI);
	var galleryImage = document.getElementById('image');
	galleryImage.style.display = 'block';
	galleryImage.src = imageURI;
}

function capturePhoto1() {
	navigator.camera.getPicture(onPhotoDataSuccess1, onFail, {
	quality: 40,
	encodingType : Camera.EncodingType.JPEG,
	targetWidth: 100,
	targetHeight: 100,
	destinationType: destinationType.DATA_URL,
	saveToPhotoAlbum: false,
	correctOrientation: true
	});
}


function capturePhoto2() {
	navigator.camera.getPicture(onPhotoDataSuccess2, onFail, {
	quality: 40,
	encodingType : Camera.EncodingType.JPEG,
	targetWidth: 100,
	targetHeight: 100,
	destinationType: destinationType.DATA_URL,
	saveToPhotoAlbum: false,
	correctOrientation: true
	});
}


function getPhoto(source) {
// Retrieve image file location from specified source
	navigator.camera.getPicture(onPhotoURISuccess, onFail, {
	quality: 50,
	targetWidth: 600,
	targetHeight: 600,
	destinationType: destinationType.FILE_URI,
	sourceType: source,
	correctOrientation: true
	});
}

function onFail(message) {
//alert('Failed because: ' + message);
}





</script>




<div class="homeContent">
<img class="homelogo_test" src="img/mainLogo.png" />
<div class="pageTitle" style="margin-top:8px;"><img src="img/defaqto.png" width="100px" /></div>
<div style="clear: both;"></div>
<div class="pageBanner">Step 3: Complete Claim</div>
<div style="clear: both;"></div>
<div class="pageBlock">

<form id="step3">

<div class="boxer">
	<div class="box-row">
		<div class="box"><img id="image1" src="" style="width:30%;" onclick="capturePhoto1();"><br><button class="btn btn-warning" style="width:85%;" onclick="capturePhoto1();">Photo 1</button></div>
		<div class="box"><img id="image2" src="" style="width:30%;" onclick="capturePhoto2();"><br><button class="btn btn-warning"  style="width:85%;" onclick="capturePhoto2();">Photo 2</button></div>
	</div>
</div>





    <button class="btn btn-success" style="width:100%;" onclick="saveTheftClaim()" value="Save" id="Continue" data-theme="a">Finish</button>

  </div>
</form>


</div>

</div>